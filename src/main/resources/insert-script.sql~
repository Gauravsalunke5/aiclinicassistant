-- Enable UUIDs
CREATE EXTENSION IF NOT EXISTS pgcrypto;

-- Insert Doctors
INSERT INTO doctor (id, name, specialty, email, phone) VALUES
  ('c1d1f1a0-1111-4e1a-b001-000000000001', 'Dr. Aditi Sharma', 'Cardiologist', 'aditi.sharma@clinic.com', '9876543210'),
  ('c1d1f1a0-1111-4e1a-b001-000000000002', 'Dr. Rahul Mehta', 'Dermatologist', 'rahul.mehta@clinic.com', '9123456780'),
  ('c1d1f1a0-1111-4e1a-b001-000000000003', 'Dr. Sneha Verma', 'Pediatrician', 'sneha.verma@clinic.com', '9988776655');

-- Insert a Patient
INSERT INTO patient (id, name, email, phone, dob, gender) VALUES
  ('d2e2f2b0-2222-4e2a-b002-000000000001', 'Priya Singh', 'priya.singh@gmail.com', '9873214560', '1988-08-10', 'Female');

-- Insert Appointment for Priya Singh with Dr. Aditi Sharma
INSERT INTO appointment ( doctor_id, patient_id, time_slot, status)
VALUES (

  'c1d1f1a0-1111-4e1a-b001-000000000001',
  'd2e2f2b0-2222-4e2a-b002-000000000001',
  CURRENT_DATE + INTERVAL '1 day' + INTERVAL '10 hour',
  'BOOKED'
);

-- Insert Doctor Schedules for next 3 days for all 3 doctors
DO $$
DECLARE
  d DATE;
  doc UUID;
BEGIN
  -- Loop over the next 3 days
  FOR d IN
    SELECT CURRENT_DATE + INTERVAL '0 days' AS day
    UNION
    SELECT CURRENT_DATE + INTERVAL '1 day'
    UNION
    SELECT CURRENT_DATE + INTERVAL '2 days'
  LOOP
    -- Loop over all doctors
    FOR doc IN
      SELECT id FROM doctor
    LOOP
      -- Insert schedule for each doctor on each of the 3 days
      INSERT INTO doctor_schedule (doctor_id, date, start_time, end_time, status, note)
      VALUES (doc, d, '09:00', '12:00', 'AVAILABLE', 'Morning availability');
    END LOOP;
  END LOOP;
END $$;
